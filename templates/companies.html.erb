<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <title>DrupalCores</title>
  <meta name="description" content="A simple list of all contributors to Drupal 8 core">
  <meta name="author" content="Eric J. Duran">
  <link type="text/plain" rel="author" href="http://ericduran.github.com/drupalcores/humans.txt" />
  <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
</head>
<body>
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ericduran/drupalcores">View on GitHub</a>
          <h1 id="project_title">DrupalCores</h1>
          <h2 id="project_tagline">A very basic table of all companies with contributors to Drupal 8 Core</h2>
        </header>
    </div>

    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <div id="chart_div" style="width: 640px; height: 400px;"></div>
        <div class="table-filter">
          <ul>
          <li>The exposed data only takes into account the company name that contributors have listed
          in their drupal.org profile at the time the list was curated. It may not be an accurate
          representation of the company that actually sponsored their contribution.</li>
          <li>This list only reflects commit mentions by individuals. Not every commit mention is a valuable
          as others. Is just a metric, so be careful when interpreting it.</li>
          <li>There are plenty of other ways of contribution to the Drupal community as an individual or
          organization. Please check <a href="https://drupal.org/contribute">https://drupal.org/contribute</a>
          for ways of getting involved.</li>
          </ul>
          Total: <%= companies.length %> companies listed
          <ul>
            <li><a href="index.html">List Contributors</a></li>
            <li><a href="companies.html">List Companies</a></li>
          </ul>
        </div>

        <table cellpadding="4" style="border: 1px solid #000000; border-collapse: collapse;" border="1" class="companies">
  <col width="5%">
  <col width="50%">
  <col width="15%">
  <col width="15%">
  <col width="15%">
 <tr>
 <th>#</th>
  <th>Company</th>
  <th>Contributors</th>
  <th>Mentions</th>
  <th>Percent</th>
 </tr>
 <% companies.each do |name, values| %>
 <tr>
  <td id="<%= name %>"><%= (lastMentions == values['mentions']) ? lastOrder : i %></td>
  <td><%= values['link'] %> <img src="images/icon_info.png" alt="Info" title="Toggle employees" class="toggle"><div class="employees" style="display: none"><%= values['contributors'].map{|k,v| "<a href=\"http://dgo.to/@#{k}\">#{k}</a> [#{v}]"}.join(', ') %></div></td>
  <td><%= values['contributors'].length %></td>
  <td><%= values['mentions'] %> (~<%= values['mentions'] / values['contributors'].length %>)</td>
  <td><%= ((values['mentions']/sum)*100).round(4) %>%</td>
  <% if lastMentions != values['mentions'] %>
    <% lastOrder = i %>
  <% end %>
  <% i += 1 %>
  <% lastMentions = values['mentions'] %>
 </tr>
 <% end %>

</table>
      </section>
    </div>

    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="updated">Last updated <%= Time.new %></p>
        <p class="copyright">DrupalCores maintained by <a href="https://github.com/ericduran">"ericduran" <3 ruby, lol</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>


<script src="https://www.google.com/jsapi"></script>
<script>
  var chartData = [
   ['Task', 'Drupal core charts'],
   ['1 commit',<%= companies.select {|k,v| v['mentions'] < 2}.length %>],
   ['2 - 10 commits',<%= companies.select {|k,v| (v['mentions'] > 1 && v['mentions'] < 11) }.length %>],
   ['Over 10 commits',<%= companies.select {|k,v| v['mentions'] > 10}.length %>]
  ];
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable(chartData);

    var options = {
      title: 'Drupal Cores Contributors Chart',
      backgroundColor: '#f2f2f2'
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

</script>
<script src="js/libs/jquery-1.7.1.min.js"></script>
<script>
  $('table.companies tr td .toggle').click(function() {
    $(this).parent().find('.employees').toggle();
  });
</script>
  </body>
</html>
